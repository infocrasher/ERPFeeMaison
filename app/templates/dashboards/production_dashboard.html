<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Mur Production - Fée Maison</title>
<style>
    html, body {
        height: 100%;
        background: #e5e7eb;
        color: #0f172a;
        overflow: hidden;
        font-family: 'Inter', 'Segoe UI', sans-serif;
    }
    .tv-wrapper {
        display: flex;
        flex-direction: column;
        height: 100vh;
        padding: 1rem 2rem 1.5rem;
        gap: 1rem;
        box-sizing: border-box;
    }
    .tv-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        text-transform: uppercase;
        letter-spacing: .2em;
    }
    .tv-header h1 {
        font-size: 1.6rem;
        margin: 0;
    }
    .tv-clock {
        font-size: 1.6rem;
        font-weight: 700;
        color: #0f172a;
    }
    .tv-stats {
        display: flex;
        gap: .75rem;
    }
    .tv-stat {
        flex: 1;
        background: #ffffff;
        border-radius: .9rem;
        padding: .8rem 1.2rem;
        border: 1px solid #e5e7eb;
        box-shadow: 0 8px 18px rgba(15,23,42,.06);
    }
    .tv-stat small {
        display: block;
        font-size: .75rem;
        text-transform: uppercase;
        letter-spacing: .2em;
        color: #6b7280;
    }
    .tv-stat strong {
        font-size: 1.6rem;
        color: #0f172a;
    }
    .tv-stat-green {
        background: #dcfce7;
        border-color: #22c55e;
    }
    .tv-stat-green strong { color: #166534; }
    .tv-stat-orange {
        background: #fef3c7;
        border-color: #f97316;
    }
    .tv-stat-orange strong { color: #92400e; }
    .tv-stat-red {
        background: #fee2e2;
        border-color: #ef4444;
    }
    .tv-stat-red strong { color: #b91c1c; }
    .orders-wall {
        flex: 1;
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
        grid-auto-rows: minmax(190px, 1fr);
        gap: 1.25rem;
    }
    .tv-card {
        border-radius: 1.5rem;
        padding: 1.6rem;
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        border: 3px solid transparent;
        box-shadow: 0 20px 30px rgba(15,23,42,.12);
    }
    .tv-card.priority-normal {
        border-color: #16a34a;
        background: #dcfce7;
    }
    .tv-card.priority-urgent {
        border-color: #eab308;
        background: #fef9c3;
    }
    .tv-card.priority-overdue {
        border-color: #ef4444;
        background: #fee2e2;
    }
    .tv-card-product {
        font-size: 2.4rem;
        font-weight: 800;
        text-transform: uppercase;
        color: #111827;
    }
    .tv-card-qty {
        font-size: 2.4rem;
        color: #0ea5e9;
        font-weight: 800;
    }
    .tv-card-timer {
        font-size: 2.8rem;
        font-weight: 800;
        color: #111827;
    }
    .tv-card-meta {
        display: flex;
        justify-content: space-between;
        font-size: 1rem;
        color: #4b5563;
        text-transform: uppercase;
        letter-spacing: .08em;
    }
    .empty-state-tv {
        font-size: 2rem;
        text-align: center;
        color: rgba(248,250,252,.4);
        grid-column: 1 / -1;
        align-self: center;
    }
</style>
</head>
<body>
<div class="tv-wrapper">
    <div class="tv-header">
        <h1>Production - Mur Temps Réel</h1>
        <div class="tv-clock" id="tv-clock">--:--</div>
    </div>
    <div class="tv-stats">
        <div class="tv-stat tv-stat-green">
            <small>À temps</small>
            <strong>{{ orders_on_time }}</strong>
        </div>
        <div class="tv-stat tv-stat-orange">
            <small>Bientôt dues</small>
            <strong>{{ orders_soon }}</strong>
        </div>
        <div class="tv-stat tv-stat-red">
            <small>En retard</small>
            <strong>{{ orders_overdue }}</strong>
        </div>
        <div class="tv-stat">
            <small>Total commandes</small>
            <strong>{{ total_orders }}</strong>
        </div>
    </div>
    <div class="orders-wall">
        {% if orders_wall %}
            {% for order in orders_wall %}
            <div class="tv-card priority-{{ order.priority }}">
                <div class="tv-card-product">{{ order.primary_product }}</div>
                <div class="tv-card-qty">{{ order.quantity_label }}</div>
                <div class="tv-card-timer">{{ order.time_label }}</div>
                <div class="tv-card-meta">
                    <span>#{{ order.id }}</span>
                    <span>{{ order.customer }}</span>
                    <span>{{ order.due_time }}</span>
                </div>
            </div>
            {% endfor %}
        {% else %}
            <div class="empty-state-tv">Aucune commande en production ✨</div>
        {% endif %}
    </div>
</div>
<script>
const clockEl = document.getElementById('tv-clock');
function updateClock() {
    const now = new Date();
    clockEl.textContent = now.toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
}
updateClock();
setInterval(updateClock, 1000);
setTimeout(() => window.location.reload(), 5 * 60 * 1000);
</script>
</body>
</html>
